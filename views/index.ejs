<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Notebook - Premium Book Tracker</title>
  <link rel="stylesheet" href="/style.css" />
  <link rel="stylesheet" href="/aos/aos.css" />
</head>

<body>
  <%- include("header", { sort: typeof sort !=='undefined' ? sort : 'title' , page: 'index' }) %>

    <div id="container">
      <div class="hero-text">
        <h1>ðŸ“š My Book Collection</h1>
        <p>
          Discover, track, and organize your reading journey with style.
          Your personal library, beautifully designed.
        </p>
      </div>

      <!-- Search Filter -->
      <div class="search-container">
        <i data-lucide="search" class="search-icon"></i>
        <input type="text" id="searchInput" class="search-input" placeholder="Search by title or author...">
      </div>

      <div class="cards">
        <% covers.forEach(cover=> { %>
          <div class="card-container">
            <div class="card">
              <!-- Front of Card -->
              <div class="card-front">
                <img src="<%= cover.image_url %>" alt="<%= cover.title %> cover">
                <h3 class="title">
                  Book Name: <%= cover.title %>
                </h3>
                <p class="author">
                  made by: <%= cover.author %>
                </p>
                <div class="rating">
                  <% for (let i=1; i <=5; i++) { %>
                    <% if (i <=cover.rating) { %>â˜…<% } else { %>â˜†<% } %>
                          <% } %>
                </div>

                <div class="note-wrapper">
                  <p class="note-content">
                    <%= cover.note ? cover.note : "No note yet" %>
                  </p>
                  <button class="read-more-btn">Read more</button>
                </div>
              </div>

              <!-- Back of Card -->
              <div class="card-back">
                <h3 class="title">
                  <%= cover.title %>
                </h3>
                <p class="author">by <%= cover.author %>
                </p>
                <div class="rating" style="margin: 20px 0;">
                  <% for (let i=1; i <=5; i++) { %>
                    <% if (i <=cover.rating) { %>â˜…<% } else { %>â˜†<% } %>
                          <% } %>
                </div>
                <div class="full-note">
                  <%= cover.note ? cover.note : "No notes available for this book yet." %>
                </div>
                <p style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 20px;">
                  ðŸ’¡ Hover back to see the cover
                </p>
              </div>
            </div>
          </div>
          <% }) %>
      </div>
    </div>

    <div class="action-buttons">
      <a href="/new"><button class="btn-primary btn-pulse"><i data-lucide="plus-circle"></i> Add New Book</button></a>
      <a href="/book"><button class="btn-secondary"><i data-lucide="library"></i> View Full Library</button></a>
    </div>

    <script src="/script.js"></script>
    <script src="/aos/aos.js"></script>
    <script>
      AOS.init({
        duration: 800,
        easing: 'ease-out-cubic',
        once: true
      });
      lucide.createIcons();
    </script>
    <%- include("footer") %>
</body>

</html>