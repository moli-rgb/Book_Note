<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Your Library</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="/aos/aos.css" />
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>
  <%- include("header", {page: 'book' }) %>

    <div id="container">
      <div class="hero-text">
        <h1>ðŸ“– Your Personal Library</h1>
        <p>All your books in one beautiful place</p>
      </div>

      <div class="cards">
        <% books.forEach(book=> { %>
          <div class="card-container">
            <div class="card">
              <!-- Front of Card -->
              <div class="card-front">
                <img src="<%= book.img_url %>" alt="<%= book.title %> cover">
                <h3 class="title">
                  Book Name: <%= book.title %>
                </h3>
                <p class="author">
                  made by: <%= book.author %>
                </p>
                <div class="rating">
                  <% for (let i=1; i <=5; i++) { %>
                    <% if (i <=book.rating) { %>â˜…<% } else { %>â˜†<% } %>
                          <% } %>
                </div>

                <div class="note-wrapper">
                  <p class="note-content">
                    <%= book.note %>
                  </p>
                  <button class="read-more-btn">Read more</button>
                </div>
              </div>

              <!-- Back of Card -->
              <div class="card-back">
                <h3 class="title">
                  <%= book.title %>
                </h3>
                <p class="author">by <%= book.author %>
                </p>
                <div class="rating" style="margin: 20px 0;">
                  <% for (let i=1; i <=5; i++) { %>
                    <% if (i <=book.rating) { %>â˜…<% } else { %>â˜†<% } %>
                          <% } %>
                </div>
                <div class="full-note">
                  <%= book.note %>
                </div>

                <div class="book-actions">
                  <a href="/edit/<%= book.id %>" title="Edit Book">
                    <button class="icon-btn edit"><i data-lucide="edit-3"></i></button>
                  </a>

                  <form action="/delete/<%= book.id %>" method="POST" style="margin: 0;">
                    <button type="submit" class="icon-btn delete" title="Delete Book"
                      onclick="return confirm('Are you sure you want to delete this book?');"><i
                        data-lucide="trash-2"></i></button>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <% }) %>
      </div>
    </div>

    <script src="/script.js"></script>
    <script src="/aos/aos.js"></script>
    <script>
      AOS.init({
        duration: 800,
        easing: 'ease-out-cubic',
        once: true
      });
      lucide.createIcons();
    </script>
    <%- include("footer") %>
</body>

</html>